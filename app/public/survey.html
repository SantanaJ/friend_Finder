<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Which Stranger Things Character are you?</title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>

    <div class="container">

        <h2>Stranger Thing Character Match</h2>
        <hr>

        <h3>
            <strong>Lets match you up!</strong>
        </h3>
        <h4>Name</h4>
        <input type="text" id="name" class="form-control" required>

        <hr>

        <h3>
            <strong>Question 1</strong>
        </h3>
        <h4>In a game of DD, what do you take with you to fight the demagorgon?</h4>
        <select class="chosen-select" id="q1">
            <option value=""></option>
            <option value="1">1 Dagger</option>
            <option value="2">2 Sword</option>
            <option value="3">3 Bow</option>
            <option value="4">4 Magic</option>
            <option value="5">5 Rage</option>
        </select>

        <h3>
            <strong>Question 2</strong>
        </h3>
        <h4>What is your favorite snack?</h4>
        <select class="chosen-select" id="q2">
            <option value=""></option>
            <option value="1">1 Potato Chips</option>
            <option value="2">2 Oreos</option>
            <option value="3">3 Chocolate Pudding</option>
            <option value="4">4 Eggo Waffles</option>
            <option value="5">5 Pizza</option>
        </select>


        <h3>
            <strong>Question 3</strong>
        </h3>
        <h4>You see an injured bird in the road. What do you do?</h4>
        <select class="chosen-select" id="q3">
            <option value=""></option>
            <option value="1">1 Put it out of its misery.</option>
            <option value="2">2 Contact animal control to see what they can do for it.</option>
            <option value="3">3 Call your mom to help it.</option>
            <option value="4">4 Take it into your house in secret and nurse it back to health.</option>
            <option value="5">5 Take it to the science teacher for a dissection project.</option>
        </select>


        <h3>
            <strong>Question 4</strong>
        </h3>
        <h4>What is your favorite 80s kids show?</h4>
        <select class="chosen-select" id="q4">
            <option value=""></option>
            <option value="1">1 Thundercats </option>
            <option value="2">2 He-Man</option>
            <option value="3">3 Garfield and Friends</option>
            <option value="4">4 Rainbow Brite</option>
            <option value="5">5 G.I Joe</option>
        </select>


        <h3>
            <strong>Question 5</strong>
        </h3>
        <h4>Which one of these is your spirit animal?</h4>
        <select class="chosen-select" id="q5">
            <option value=""></option>
            <option value="1">1 Elephant</option>
            <option value="2">2 Rabbit</option>
            <option value="3">3 Golden Retriever</option>
            <option value="4">4 Wolf</option>
            <option value="5">5 Dolphin</option>
        </select>


        <h3>
            <strong>Question 6</strong>
        </h3>
        <h4>A bully is making fun of your friend. What do you do?</h4>
        <select class="chosen-select" id="q6">
            <option value=""></option>
            <option value="1">1 Remind them how stupid they are.</option>
            <option value="2">2 Ask them to stop</option>
            <option value="3">3 Scare them by acting super weird</option>
            <option value="4">4 Tell an adult</option>
            <option value="5">5 Punch them in the face</option>
        </select>


        <h3>
            <strong>Question 7</strong>
        </h3>
        <h4>How long does it take you to finish off all of the halloween candy you've collected?</h4>
        <select class="chosen-select" id="q7">
            <option value=""></option>
            <option value="1">1 One Day</option>
            <option value="2">2 One Hour</option>
            <option value="3">3 One Year</option>
            <option value="4">4 One Month</option>
            <option value="5">5 One Week</option>
        </select>

        <h3>
            <strong>Question 8</strong>
        </h3>
        <h4>What are you trick or treating as this year?</h4>
        <select class="chosen-select" id="q8">
            <option value=""></option>
            <option value="1">1 A Mad Scientist</option>
            <option value="2">2 An Action Hero</option>
            <option value="3">3 A Monster</option>
            <option value="4">4 A Wizard</option>
            <option value="5">5 An Alien</option>
        </select>

        <h3>
            <strong>Question 9</strong>
        </h3>
        <h4>What is your favorite color?</h4>
        <select class="chosen-select" id="q9">
            <option value=""></option>
            <option value="1">1 Yellow</option>
            <option value="2">2 Blue </option>
            <option value="3">3 Green</option>
            <option value="4">4 Pink </option>
            <option value="5">5 Red</option>
        </select>

        <h3>
            <strong>Question 10</strong>
        </h3>
        <h4>What was your favorite childhood toy?</h4>
        <select class="chosen-select" id="q10">
            <option value=""></option>
            <option value="1">1 Bike</option>
            <option value="2">2 Art Supplies</option>
            <option value="3">3 Action Figures</option>
            <option value="4">4 Stuffed Animal</option>
            <option value="5">5 Board Game</option>
        </select>

        <br>
        <br>
        <button type="submit" class="btn btn-warning btn-lg btn-block" id="submit">
            <i class="fa fa-check-circle" aria-hidden="true"></i>
            Submit</button>

        <hr>
        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Friends List</a>
            </div>
        </footer>

    </div>

    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title">
                        <strong>Best Match</strong>
                    </h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- <script src="./javascript/app.js"></script> -->


    <script type="text/javascript">

    $("#submit").on("click", function(){
        var userInput = {
            name: $("#input-name").val(),
            answers: []
        };

        for (var i = 0; i < 10; i++) {
            userInput.answers.push(parseInt($("#q" + (i + 1)).val()));
        }


        var user_match = answer(userInput.answers);
        $.post("/new", {
            user_match,
            name: userInput.name
        },function(data){
            console.log(data);
        });

        var modal_result = {
            eleven: {
                photo: "https://upload.wikimedia.org/wikipedia/en/thumb/5/52/Eleven_%28Stranger_Things%29.jpg/220px-Eleven_%28Stranger_Things%29.jpg",
                alt: "Eleven"
            },
            mike: {
                photo: "https://rossonl.files.wordpress.com/2017/12/mike1.jpg",
                alt: "Mike"
            },
            dustin: {
                photo: "http://media.immediate.co.uk/volatile/sites/3/2017/10/Dustin-Stranger-Things-a09ec64.jpg",
                alt: "Dustin"
            },
            lucas: {
                photo: "http://www.indiewire.com/wp-content/uploads/2017/11/wv_publicity_pre_launch_b_still_9-000001.jpeg?w=780",
                alt: "Lucas"
            },
            will: {
                photo: "http://digitalspyuk.cdnds.net/16/36/768x384/landscape-1473093995-will-stranger-things.jpeg",
                alt: "Will"
            },
        }

        $("#modal-title").html('<strong> Your Match is ${userInput.name}!</strong>');
        $("#modal-content").empty();
        $("#modal-content").append(
            `<img src='${modal_result[user_match].photo}' alt='${modal_result[user_match].alt}'>`
        );

        $("#results-modal").modal("toggle");

        function answer(userAnswers) {
            var characters = {
                eleven: [4, 4, 4, 4, 4, 5, 1, 5, 1, 5],
                mike: [3, 5, 2, 1, 1, 4, 2, 3, 3, 3],
                dustin: [5, 2, 3, 5, 5, 3, 2, 1, 4, 5],
                lucas: [1, 3, 3, 2, 2, 2, 4, 2, 5, 3],
                will: [3, 1, 1, 4, 3, 4, 5, 4, 2, 4]

            }

            var minimum_score = 1000;
            var char_match = "";
            for (var character in characters) {
                var char_score = characters[character];
                var score = 0;
                for (var j = 0; j < userAnswers.length; j++) {
                    score = score + Math.abs(userAnswers[j] - char_score[j]);
                }

                if (score < minimum_score) {
                    minimum_score = score;
                    char_match = character;
                }
            }
            return char_match
        }

    });
    </script>

</body>

</html>